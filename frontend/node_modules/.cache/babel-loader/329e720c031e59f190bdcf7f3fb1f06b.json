{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { request } from '../../request';\nconst initialState = {\n  games: [],\n  game: {},\n  singleGameLoading: true,\n  isLoading: false\n};\nexport const gamesSlice = createSlice({\n  name: 'games',\n  initialState,\n  reducers: {\n    setIsLoadingR: (state, action) => {\n      state.isLoading = action.payload === undefined ? true : action.payload;\n    },\n    setSingleGameLoadingR: (state, action) => {\n      // state.game = {}\n      state.singleGameLoading = action.payload === undefined ? true : action.payload;\n    },\n    getGamesR: (state, action) => {\n      state.games = action.payload;\n    },\n    getGameByIdR: (state, action) => {\n      state.game = action.payload;\n      state.singleGameLoading = false;\n    },\n    clearGameByIdR: (state, action) => {\n      console.log('CLEARINGGGGG');\n      state.game = {};\n    },\n    createGameR: (state, action) => {\n      state.games = [...state.games, action.payload];\n      state.isLoading = false;\n    },\n    updateGameR: (state, action) => {\n      state.game = action.payload;\n      state.isLoading = false;\n    },\n    addPlayerGameStatsR: (state, action) => {\n      state.game = { ...state.game,\n        player_stats: [...state.game.player_stats, action.payload]\n      };\n    },\n    updatePlayerGameStatsR: (state, action) => {\n      const player_stats = state.game.player_stats.map(item => {\n        if (item.player_id === action.payload.updatedPlayer.player_id) {\n          return action.payload.updatedPlayer;\n        }\n\n        return item;\n      });\n      state.game = { ...state.game,\n        ...action.payload.updatedGame,\n        player_stats\n      };\n    },\n    removePlayerFromGameR: (state, action) => {}\n  }\n});\n\nconst wait = t => new Promise(resolve => setTimeout(resolve, t));\n\nexport const getAllGames = () => async dispatch => {\n  try {\n    const data = await request({\n      url: '/api/games',\n      method: 'GET'\n    });\n    console.log(data, 'daattaaa');\n    if (!data) return alert(\"error in getAllPlayers\"); //   const response = await axios.get(`${API_URL}/${data}`);\n\n    dispatch(getGamesR(data.data));\n  } catch (err) {\n    throw new Error(err);\n  }\n};\nexport const getGameById = game_id => async dispatch => {\n  // dispatch(setSingleGameLoadingR())\n  // await wait(600)\n  try {\n    const data = await request({\n      url: `/api/games/${game_id}`,\n      method: 'GET'\n    }); // console.log(data, 'daattaaa')\n\n    if (!data) return alert(\"error in getGameById\"); //   const response = await axios.get(`${API_URL}/${data}`);\n\n    dispatch(getGameByIdR(data.data));\n  } catch (err) {\n    dispatch(setSingleGameLoadingR(false));\n    throw new Error(err);\n  }\n};\nexport const createGame = newGame => async dispatch => {\n  dispatch(setIsLoadingR());\n  await wait(1000);\n\n  try {\n    const data = await request({\n      url: '/api/games',\n      method: 'POST',\n      session: newGame\n    });\n    console.log(data, 'data in createGame');\n    if (!data) return alert(\"error in createGame\");\n    dispatch(createGameR(data.data));\n    return true;\n  } catch (err) {\n    dispatch(setIsLoadingR(false));\n    throw new Error(err); // return false\n  }\n};\nexport const updateGame = gameDetails => async dispatch => {\n  console.log(gameDetails, 'gameDetails');\n  dispatch(setIsLoadingR());\n  await wait(1000);\n\n  try {\n    const data = await request({\n      url: `/api/games/${gameDetails.game_id}`,\n      method: 'PUT',\n      session: gameDetails\n    });\n    console.log(data, 'data in updateGame');\n    if (!data) return alert(\"error in updateGame\");\n    dispatch(updateGameR(data.data));\n    return true;\n  } catch (err) {\n    dispatch(setIsLoadingR(false));\n    throw new Error(err); // return false\n  }\n};\nexport const updatePlayerGameStats = playerStats => async dispatch => {\n  console.log(playerStats, ' playerStats game!!');\n  const {\n    game_id,\n    player_id,\n    ...rest\n  } = playerStats;\n\n  try {\n    const data = await request({\n      url: `/api/games/${game_id}/${player_id}`,\n      method: 'PUT',\n      session: rest\n    });\n    console.log(data, 'data in updatePlayerGameStats');\n    if (!data) return alert(\"error in updatePlayerGameStats\"); //   const response = await axios.get(`${API_URL}/${data}`);\n\n    dispatch(updatePlayerGameStatsR(data.data));\n  } catch (err) {\n    throw new Error(err);\n  }\n};\nexport const addPlayerGameStats = playerStats => async dispatch => {\n  console.log(playerStats, 'playerstattsss =====++++');\n  const {\n    game_id,\n    player_id,\n    ...rest\n  } = playerStats;\n\n  try {\n    const data = await request({\n      url: `/api/games/${game_id}/${player_id}`,\n      method: 'POST',\n      session: rest\n    });\n    console.log(data, 'data in addPlayerGameStats');\n    if (!data) return alert(\"error in addPlayerGameStats\");\n    dispatch(addPlayerGameStatsR(data.data));\n  } catch (err) {\n    throw new Error(err);\n  }\n};\nexport const quickAddPlayersToGame = _ref => {\n  let {\n    players,\n    gameId\n  } = _ref;\n  return async dispatch => {\n    console.log(players, 'players ====== quickAddPlayersToGame '); // path: '/api/games/:game_id',\n\n    dispatch(setSingleGameLoadingR()); // const { game_id, player_id, ...rest } = playerStats;\n\n    try {\n      const data = await request({\n        url: `/api/games/${gameId}`,\n        method: 'PATCH',\n        session: {\n          players\n        }\n      });\n      console.log(data, 'data in quickAddPlayersToGame');\n      if (!data) return alert(\"error in quickAddPlayersToGame\"); // dispatch(addPlayerGameStatsR(data.data));\n\n      dispatch(getGameById(gameId));\n    } catch (err) {\n      throw new Error(err);\n    }\n  };\n};\nexport const removePlayerFromGame = player => async dispatch => {\n  dispatch(setIsLoadingR());\n  await wait(600);\n\n  try {\n    var _data$data;\n\n    const data = await request({\n      url: `/api/games/${player.game_id}/${player.player_id}`,\n      method: 'DELETE',\n      session: player\n    });\n    console.log(data, 'data in removePlayerFromGame');\n    if (!data) return alert(\"error in quickAddPlayersToGame\");\n    dispatch(getGameByIdR((_data$data = data.data) === null || _data$data === void 0 ? void 0 : _data$data.game));\n    dispatch(setIsLoadingR(false));\n    return true; // dispatch(getGameById(gameId))\n  } catch (err) {\n    throw new Error(err);\n  }\n}; // Action creators are generated for each case reducer function\n\nexport const {\n  getGamesR,\n  createGameR,\n  getGameByIdR,\n  addPlayerGameStatsR,\n  updatePlayerGameStatsR,\n  setSingleGameLoadingR,\n  setIsLoadingR,\n  clearGameByIdR,\n  updateGameR\n} = gamesSlice.actions;\nexport default gamesSlice.reducer;","map":{"version":3,"sources":["/Users/keithjones/Documents/development/projects/mp-lax/frontend/src/redux/slices/gamesSlice.js"],"names":["createSlice","request","initialState","games","game","singleGameLoading","isLoading","gamesSlice","name","reducers","setIsLoadingR","state","action","payload","undefined","setSingleGameLoadingR","getGamesR","getGameByIdR","clearGameByIdR","console","log","createGameR","updateGameR","addPlayerGameStatsR","player_stats","updatePlayerGameStatsR","map","item","player_id","updatedPlayer","updatedGame","removePlayerFromGameR","wait","t","Promise","resolve","setTimeout","getAllGames","dispatch","data","url","method","alert","err","Error","getGameById","game_id","createGame","newGame","session","updateGame","gameDetails","updatePlayerGameStats","playerStats","rest","addPlayerGameStats","quickAddPlayersToGame","players","gameId","removePlayerFromGame","player","actions","reducer"],"mappings":"AAAA,SAASA,WAAT,QAA4B,kBAA5B;AACA,SAASC,OAAT,QAAwB,eAAxB;AAEA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,KAAK,EAAE,EADY;AAEnBC,EAAAA,IAAI,EAAE,EAFa;AAGnBC,EAAAA,iBAAiB,EAAE,IAHA;AAInBC,EAAAA,SAAS,EAAE;AAJQ,CAArB;AAOA,OAAO,MAAMC,UAAU,GAAGP,WAAW,CAAC;AAClCQ,EAAAA,IAAI,EAAE,OAD4B;AAElCN,EAAAA,YAFkC;AAGlCO,EAAAA,QAAQ,EAAE;AACNC,IAAAA,aAAa,EAAE,CAACC,KAAD,EAAQC,MAAR,KAAmB;AAC9BD,MAAAA,KAAK,CAACL,SAAN,GAAkBM,MAAM,CAACC,OAAP,KAAmBC,SAAnB,GAA+B,IAA/B,GAAsCF,MAAM,CAACC,OAA/D;AACH,KAHK;AAINE,IAAAA,qBAAqB,EAAE,CAACJ,KAAD,EAAQC,MAAR,KAAmB;AACtC;AACAD,MAAAA,KAAK,CAACN,iBAAN,GAA0BO,MAAM,CAACC,OAAP,KAAmBC,SAAnB,GAA+B,IAA/B,GAAsCF,MAAM,CAACC,OAAvE;AACH,KAPK;AAQNG,IAAAA,SAAS,EAAE,CAACL,KAAD,EAAQC,MAAR,KAAmB;AAC1BD,MAAAA,KAAK,CAACR,KAAN,GAAcS,MAAM,CAACC,OAArB;AACH,KAVK;AAWNI,IAAAA,YAAY,EAAE,CAACN,KAAD,EAAQC,MAAR,KAAmB;AAC7BD,MAAAA,KAAK,CAACP,IAAN,GAAaQ,MAAM,CAACC,OAApB;AACAF,MAAAA,KAAK,CAACN,iBAAN,GAA0B,KAA1B;AACH,KAdK;AAeNa,IAAAA,cAAc,EAAE,CAACP,KAAD,EAAQC,MAAR,KAAmB;AAC/BO,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAT,MAAAA,KAAK,CAACP,IAAN,GAAa,EAAb;AACH,KAlBK;AAmBNiB,IAAAA,WAAW,EAAE,CAACV,KAAD,EAAQC,MAAR,KAAmB;AAC5BD,MAAAA,KAAK,CAACR,KAAN,GAAc,CAAC,GAAGQ,KAAK,CAACR,KAAV,EAAiBS,MAAM,CAACC,OAAxB,CAAd;AACAF,MAAAA,KAAK,CAACL,SAAN,GAAkB,KAAlB;AACH,KAtBK;AAuBNgB,IAAAA,WAAW,EAAE,CAACX,KAAD,EAAQC,MAAR,KAAmB;AAC5BD,MAAAA,KAAK,CAACP,IAAN,GAAaQ,MAAM,CAACC,OAApB;AACAF,MAAAA,KAAK,CAACL,SAAN,GAAkB,KAAlB;AACH,KA1BK;AA2BNiB,IAAAA,mBAAmB,EAAE,CAACZ,KAAD,EAAQC,MAAR,KAAmB;AACpCD,MAAAA,KAAK,CAACP,IAAN,GAAa,EAAC,GAAGO,KAAK,CAACP,IAAV;AAAgBoB,QAAAA,YAAY,EAAE,CAAC,GAAGb,KAAK,CAACP,IAAN,CAAWoB,YAAf,EAA6BZ,MAAM,CAACC,OAApC;AAA9B,OAAb;AACH,KA7BK;AA8BNY,IAAAA,sBAAsB,EAAE,CAACd,KAAD,EAAQC,MAAR,KAAmB;AACvC,YAAMY,YAAY,GAAGb,KAAK,CAACP,IAAN,CAAWoB,YAAX,CAAwBE,GAAxB,CAA4BC,IAAI,IAAI;AACrD,YAAIA,IAAI,CAACC,SAAL,KAAmBhB,MAAM,CAACC,OAAP,CAAegB,aAAf,CAA6BD,SAApD,EAA+D;AAC3D,iBAAOhB,MAAM,CAACC,OAAP,CAAegB,aAAtB;AACH;;AACD,eAAOF,IAAP;AACH,OALoB,CAArB;AAMAhB,MAAAA,KAAK,CAACP,IAAN,GAAa,EAAE,GAAGO,KAAK,CAACP,IAAX;AAAiB,WAAGQ,MAAM,CAACC,OAAP,CAAeiB,WAAnC;AAAgDN,QAAAA;AAAhD,OAAb;AACH,KAtCK;AAuCNO,IAAAA,qBAAqB,EAAE,CAACpB,KAAD,EAAQC,MAAR,KAAmB,CAEzC;AAzCK;AAHwB,CAAD,CAA9B;;AA+CP,MAAMoB,IAAI,GAAGC,CAAC,IAAI,IAAIC,OAAJ,CAAYC,OAAO,IAAIC,UAAU,CAACD,OAAD,EAAUF,CAAV,CAAjC,CAAlB;;AAGA,OAAO,MAAMI,WAAW,GAAG,MAAM,MAAOC,QAAP,IAAoB;AACjD,MAAI;AACA,UAAMC,IAAI,GAAG,MAAMtC,OAAO,CAAC;AAAEuC,MAAAA,GAAG,EAAE,YAAP;AAAqBC,MAAAA,MAAM,EAAE;AAA7B,KAAD,CAA1B;AACAtB,IAAAA,OAAO,CAACC,GAAR,CAAYmB,IAAZ,EAAkB,UAAlB;AACA,QAAI,CAACA,IAAL,EAAW,OAAOG,KAAK,CAAC,wBAAD,CAAZ,CAHX,CAIJ;;AACIJ,IAAAA,QAAQ,CAACtB,SAAS,CAACuB,IAAI,CAACA,IAAN,CAAV,CAAR;AACH,GAND,CAME,OAAOI,GAAP,EAAY;AACV,UAAM,IAAIC,KAAJ,CAAUD,GAAV,CAAN;AACH;AACJ,CAVM;AAYP,OAAO,MAAME,WAAW,GAAIC,OAAD,IAAa,MAAOR,QAAP,IAAoB;AACxD;AAEA;AACA,MAAI;AACA,UAAMC,IAAI,GAAG,MAAMtC,OAAO,CAAC;AAAEuC,MAAAA,GAAG,EAAG,cAAaM,OAAQ,EAA7B;AAAgCL,MAAAA,MAAM,EAAE;AAAxC,KAAD,CAA1B,CADA,CAEA;;AACA,QAAI,CAACF,IAAL,EAAW,OAAOG,KAAK,CAAC,sBAAD,CAAZ,CAHX,CAIJ;;AACIJ,IAAAA,QAAQ,CAACrB,YAAY,CAACsB,IAAI,CAACA,IAAN,CAAb,CAAR;AACH,GAND,CAME,OAAOI,GAAP,EAAY;AACVL,IAAAA,QAAQ,CAACvB,qBAAqB,CAAC,KAAD,CAAtB,CAAR;AACA,UAAM,IAAI6B,KAAJ,CAAUD,GAAV,CAAN;AACH;AACJ,CAdM;AAgBP,OAAO,MAAMI,UAAU,GAAIC,OAAD,IAAa,MAAOV,QAAP,IAAoB;AACvDA,EAAAA,QAAQ,CAAC5B,aAAa,EAAd,CAAR;AAEA,QAAMsB,IAAI,CAAC,IAAD,CAAV;;AAEA,MAAI;AACA,UAAMO,IAAI,GAAG,MAAMtC,OAAO,CAAC;AAAEuC,MAAAA,GAAG,EAAE,YAAP;AAAqBC,MAAAA,MAAM,EAAE,MAA7B;AAAqCQ,MAAAA,OAAO,EAAED;AAA9C,KAAD,CAA1B;AACA7B,IAAAA,OAAO,CAACC,GAAR,CAAYmB,IAAZ,EAAkB,oBAAlB;AACA,QAAI,CAACA,IAAL,EAAW,OAAOG,KAAK,CAAC,qBAAD,CAAZ;AACXJ,IAAAA,QAAQ,CAACjB,WAAW,CAACkB,IAAI,CAACA,IAAN,CAAZ,CAAR;AACA,WAAO,IAAP;AACH,GAND,CAME,OAAOI,GAAP,EAAY;AACVL,IAAAA,QAAQ,CAAC5B,aAAa,CAAC,KAAD,CAAd,CAAR;AACA,UAAM,IAAIkC,KAAJ,CAAUD,GAAV,CAAN,CAFU,CAGV;AACH;AACJ,CAhBM;AAmBP,OAAO,MAAMO,UAAU,GAAIC,WAAD,IAAiB,MAAOb,QAAP,IAAoB;AAC3DnB,EAAAA,OAAO,CAACC,GAAR,CAAY+B,WAAZ,EAAyB,aAAzB;AACAb,EAAAA,QAAQ,CAAC5B,aAAa,EAAd,CAAR;AAEA,QAAMsB,IAAI,CAAC,IAAD,CAAV;;AAEA,MAAI;AACA,UAAMO,IAAI,GAAG,MAAMtC,OAAO,CAAC;AAAEuC,MAAAA,GAAG,EAAG,cAAaW,WAAW,CAACL,OAAQ,EAAzC;AAA4CL,MAAAA,MAAM,EAAE,KAApD;AAA2DQ,MAAAA,OAAO,EAAEE;AAApE,KAAD,CAA1B;AACAhC,IAAAA,OAAO,CAACC,GAAR,CAAYmB,IAAZ,EAAkB,oBAAlB;AACA,QAAI,CAACA,IAAL,EAAW,OAAOG,KAAK,CAAC,qBAAD,CAAZ;AACXJ,IAAAA,QAAQ,CAAChB,WAAW,CAACiB,IAAI,CAACA,IAAN,CAAZ,CAAR;AACA,WAAO,IAAP;AACH,GAND,CAME,OAAOI,GAAP,EAAY;AACVL,IAAAA,QAAQ,CAAC5B,aAAa,CAAC,KAAD,CAAd,CAAR;AACA,UAAM,IAAIkC,KAAJ,CAAUD,GAAV,CAAN,CAFU,CAGV;AACH;AACJ,CAjBM;AAoBP,OAAO,MAAMS,qBAAqB,GAAIC,WAAD,IAAiB,MAAOf,QAAP,IAAoB;AACtEnB,EAAAA,OAAO,CAACC,GAAR,CAAYiC,WAAZ,EAAwB,qBAAxB;AACA,QAAM;AAAEP,IAAAA,OAAF;AAAWlB,IAAAA,SAAX;AAAsB,OAAG0B;AAAzB,MAAkCD,WAAxC;;AAEA,MAAI;AACA,UAAMd,IAAI,GAAG,MAAMtC,OAAO,CAAC;AAAEuC,MAAAA,GAAG,EAAG,cAAaM,OAAQ,IAAGlB,SAAU,EAA1C;AAA6Ca,MAAAA,MAAM,EAAE,KAArD;AAA4DQ,MAAAA,OAAO,EAAEK;AAArE,KAAD,CAA1B;AACAnC,IAAAA,OAAO,CAACC,GAAR,CAAYmB,IAAZ,EAAkB,+BAAlB;AACA,QAAI,CAACA,IAAL,EAAW,OAAOG,KAAK,CAAC,gCAAD,CAAZ,CAHX,CAIJ;;AACIJ,IAAAA,QAAQ,CAACb,sBAAsB,CAACc,IAAI,CAACA,IAAN,CAAvB,CAAR;AACH,GAND,CAME,OAAOI,GAAP,EAAY;AACV,UAAM,IAAIC,KAAJ,CAAUD,GAAV,CAAN;AACH;AACJ,CAbM;AAeP,OAAO,MAAMY,kBAAkB,GAAIF,WAAD,IAAiB,MAAOf,QAAP,IAAoB;AACnEnB,EAAAA,OAAO,CAACC,GAAR,CAAYiC,WAAZ,EAAyB,0BAAzB;AACA,QAAM;AAAEP,IAAAA,OAAF;AAAWlB,IAAAA,SAAX;AAAsB,OAAG0B;AAAzB,MAAkCD,WAAxC;;AACA,MAAI;AACA,UAAMd,IAAI,GAAG,MAAMtC,OAAO,CAAC;AAAEuC,MAAAA,GAAG,EAAG,cAAaM,OAAQ,IAAGlB,SAAU,EAA1C;AAA6Ca,MAAAA,MAAM,EAAE,MAArD;AAA6DQ,MAAAA,OAAO,EAAEK;AAAtE,KAAD,CAA1B;AACAnC,IAAAA,OAAO,CAACC,GAAR,CAAYmB,IAAZ,EAAkB,4BAAlB;AACA,QAAI,CAACA,IAAL,EAAW,OAAOG,KAAK,CAAC,6BAAD,CAAZ;AACXJ,IAAAA,QAAQ,CAACf,mBAAmB,CAACgB,IAAI,CAACA,IAAN,CAApB,CAAR;AACH,GALD,CAKE,OAAOI,GAAP,EAAY;AACV,UAAM,IAAIC,KAAJ,CAAUD,GAAV,CAAN;AACH;AACJ,CAXM;AAaP,OAAO,MAAMa,qBAAqB,GAAG;AAAA,MAAC;AAAEC,IAAAA,OAAF;AAAWC,IAAAA;AAAX,GAAD;AAAA,SAA0B,MAAOpB,QAAP,IAAoB;AAC/EnB,IAAAA,OAAO,CAACC,GAAR,CAAYqC,OAAZ,EAAqB,uCAArB,EAD+E,CAE/E;;AAEAnB,IAAAA,QAAQ,CAACvB,qBAAqB,EAAtB,CAAR,CAJ+E,CAK/E;;AACA,QAAI;AACA,YAAMwB,IAAI,GAAG,MAAMtC,OAAO,CAAC;AAAEuC,QAAAA,GAAG,EAAG,cAAakB,MAAO,EAA5B;AAA+BjB,QAAAA,MAAM,EAAE,OAAvC;AAAgDQ,QAAAA,OAAO,EAAE;AAAEQ,UAAAA;AAAF;AAAzD,OAAD,CAA1B;AACAtC,MAAAA,OAAO,CAACC,GAAR,CAAYmB,IAAZ,EAAkB,+BAAlB;AACA,UAAI,CAACA,IAAL,EAAW,OAAOG,KAAK,CAAC,gCAAD,CAAZ,CAHX,CAIA;;AACAJ,MAAAA,QAAQ,CAACO,WAAW,CAACa,MAAD,CAAZ,CAAR;AACH,KAND,CAME,OAAOf,GAAP,EAAY;AACV,YAAM,IAAIC,KAAJ,CAAUD,GAAV,CAAN;AACH;AACJ,GAfoC;AAAA,CAA9B;AAiBP,OAAO,MAAMgB,oBAAoB,GAAIC,MAAD,IAAY,MAAOtB,QAAP,IAAoB;AAChEA,EAAAA,QAAQ,CAAC5B,aAAa,EAAd,CAAR;AACA,QAAMsB,IAAI,CAAC,GAAD,CAAV;;AACA,MAAI;AAAA;;AACA,UAAMO,IAAI,GAAG,MAAMtC,OAAO,CAAC;AAAEuC,MAAAA,GAAG,EAAG,cAAaoB,MAAM,CAACd,OAAQ,IAAGc,MAAM,CAAChC,SAAU,EAAxD;AAA2Da,MAAAA,MAAM,EAAE,QAAnE;AAA6EQ,MAAAA,OAAO,EAAEW;AAAtF,KAAD,CAA1B;AACAzC,IAAAA,OAAO,CAACC,GAAR,CAAYmB,IAAZ,EAAkB,8BAAlB;AACA,QAAI,CAACA,IAAL,EAAW,OAAOG,KAAK,CAAC,gCAAD,CAAZ;AACXJ,IAAAA,QAAQ,CAACrB,YAAY,eAACsB,IAAI,CAACA,IAAN,+CAAC,WAAWnC,IAAZ,CAAb,CAAR;AACAkC,IAAAA,QAAQ,CAAC5B,aAAa,CAAC,KAAD,CAAd,CAAR;AAEA,WAAO,IAAP,CAPA,CASA;AAEH,GAXD,CAWE,OAAOiC,GAAP,EAAY;AACV,UAAM,IAAIC,KAAJ,CAAUD,GAAV,CAAN;AACH;AACJ,CAjBM,C,CAmBP;;AACA,OAAO,MAAM;AAAE3B,EAAAA,SAAF;AAAaK,EAAAA,WAAb;AAA0BJ,EAAAA,YAA1B;AAAwCM,EAAAA,mBAAxC;AAA6DE,EAAAA,sBAA7D;AAAqFV,EAAAA,qBAArF;AAA4GL,EAAAA,aAA5G;AAA2HQ,EAAAA,cAA3H;AAA2II,EAAAA;AAA3I,IAA2Jf,UAAU,CAACsD,OAA5K;AACP,eAAetD,UAAU,CAACuD,OAA1B","sourcesContent":["import { createSlice } from '@reduxjs/toolkit'\nimport { request } from '../../request'\n\nconst initialState = {\n  games: [],\n  game: {},\n  singleGameLoading: true,\n  isLoading: false,\n}\n\nexport const gamesSlice = createSlice({\n    name: 'games',\n    initialState,\n    reducers: {\n        setIsLoadingR: (state, action) => {\n            state.isLoading = action.payload === undefined ? true : action.payload;\n        },\n        setSingleGameLoadingR: (state, action) => {\n            // state.game = {}\n            state.singleGameLoading = action.payload === undefined ? true : action.payload;\n        },\n        getGamesR: (state, action) => {\n            state.games = action.payload;\n        },\n        getGameByIdR: (state, action) => {\n            state.game = action.payload;\n            state.singleGameLoading = false;\n        },\n        clearGameByIdR: (state, action) => {\n            console.log('CLEARINGGGGG')\n            state.game = {}\n        },\n        createGameR: (state, action) => {\n            state.games = [...state.games, action.payload];\n            state.isLoading = false;\n        },\n        updateGameR: (state, action) => {\n            state.game = action.payload;\n            state.isLoading = false;\n        },\n        addPlayerGameStatsR: (state, action) => {\n            state.game = {...state.game, player_stats: [...state.game.player_stats, action.payload]}\n        },\n        updatePlayerGameStatsR: (state, action) => {\n            const player_stats = state.game.player_stats.map(item => {\n                if (item.player_id === action.payload.updatedPlayer.player_id) {\n                    return action.payload.updatedPlayer\n                }\n                return item;\n            })\n            state.game = { ...state.game, ...action.payload.updatedGame, player_stats }\n        },\n        removePlayerFromGameR: (state, action) => {\n            \n        },\n    },\n})\nconst wait = t => new Promise(resolve => setTimeout(resolve, t));\n\n\nexport const getAllGames = () => async (dispatch) => {\n    try {\n        const data = await request({ url: '/api/games', method: 'GET' });\n        console.log(data, 'daattaaa')\n        if (!data) return alert(\"error in getAllPlayers\")\n    //   const response = await axios.get(`${API_URL}/${data}`);\n        dispatch(getGamesR(data.data));\n    } catch (err) {\n        throw new Error(err);\n    }\n};\n\nexport const getGameById = (game_id) => async (dispatch) => {\n    // dispatch(setSingleGameLoadingR())\n\n    // await wait(600)\n    try {\n        const data = await request({ url: `/api/games/${game_id}`, method: 'GET' });\n        // console.log(data, 'daattaaa')\n        if (!data) return alert(\"error in getGameById\")\n    //   const response = await axios.get(`${API_URL}/${data}`);\n        dispatch(getGameByIdR(data.data));\n    } catch (err) {\n        dispatch(setSingleGameLoadingR(false))\n        throw new Error(err);\n    }\n};\n\nexport const createGame = (newGame) => async (dispatch) => {\n    dispatch(setIsLoadingR());\n\n    await wait(1000);\n\n    try {\n        const data = await request({ url: '/api/games', method: 'POST', session: newGame});\n        console.log(data, 'data in createGame')\n        if (!data) return alert(\"error in createGame\")\n        dispatch(createGameR(data.data));\n        return true;\n    } catch (err) {\n        dispatch(setIsLoadingR(false));\n        throw new Error(err);\n        // return false\n    }\n};\n\n\nexport const updateGame = (gameDetails) => async (dispatch) => {\n    console.log(gameDetails, 'gameDetails')\n    dispatch(setIsLoadingR());\n\n    await wait(1000);\n\n    try {\n        const data = await request({ url: `/api/games/${gameDetails.game_id}`, method: 'PUT', session: gameDetails});\n        console.log(data, 'data in updateGame')\n        if (!data) return alert(\"error in updateGame\")\n        dispatch(updateGameR(data.data));\n        return true;\n    } catch (err) {\n        dispatch(setIsLoadingR(false));\n        throw new Error(err);\n        // return false\n    }\n};\n\n\nexport const updatePlayerGameStats = (playerStats) => async (dispatch) => {\n    console.log(playerStats,' playerStats game!!')\n    const { game_id, player_id, ...rest } = playerStats;\n\n    try {\n        const data = await request({ url: `/api/games/${game_id}/${player_id}`, method: 'PUT', session: rest});\n        console.log(data, 'data in updatePlayerGameStats')\n        if (!data) return alert(\"error in updatePlayerGameStats\")\n    //   const response = await axios.get(`${API_URL}/${data}`);\n        dispatch(updatePlayerGameStatsR(data.data));\n    } catch (err) {\n        throw new Error(err);\n    }\n};\n\nexport const addPlayerGameStats = (playerStats) => async (dispatch) => {\n    console.log(playerStats, 'playerstattsss =====++++')\n    const { game_id, player_id, ...rest } = playerStats;\n    try {\n        const data = await request({ url: `/api/games/${game_id}/${player_id}`, method: 'POST', session: rest});\n        console.log(data, 'data in addPlayerGameStats')\n        if (!data) return alert(\"error in addPlayerGameStats\")\n        dispatch(addPlayerGameStatsR(data.data));\n    } catch (err) {\n        throw new Error(err);\n    }\n}\n\nexport const quickAddPlayersToGame = ({ players, gameId  }) => async (dispatch) => {\n    console.log(players, 'players ====== quickAddPlayersToGame ')\n    // path: '/api/games/:game_id',\n\n    dispatch(setSingleGameLoadingR())\n    // const { game_id, player_id, ...rest } = playerStats;\n    try {\n        const data = await request({ url: `/api/games/${gameId}`, method: 'PATCH', session: { players } });\n        console.log(data, 'data in quickAddPlayersToGame')\n        if (!data) return alert(\"error in quickAddPlayersToGame\")\n        // dispatch(addPlayerGameStatsR(data.data));\n        dispatch(getGameById(gameId))\n    } catch (err) {\n        throw new Error(err);\n    }\n}\n\nexport const removePlayerFromGame = (player) => async (dispatch) => {\n    dispatch(setIsLoadingR());\n    await wait(600)\n    try {\n        const data = await request({ url: `/api/games/${player.game_id}/${player.player_id}`, method: 'DELETE', session: player });\n        console.log(data, 'data in removePlayerFromGame')\n        if (!data) return alert(\"error in quickAddPlayersToGame\")\n        dispatch(getGameByIdR(data.data?.game));\n        dispatch(setIsLoadingR(false));\n\n        return true;\n        \n        // dispatch(getGameById(gameId))\n        \n    } catch (err) {\n        throw new Error(err);\n    }\n}\n\n// Action creators are generated for each case reducer function\nexport const { getGamesR, createGameR, getGameByIdR, addPlayerGameStatsR, updatePlayerGameStatsR, setSingleGameLoadingR, setIsLoadingR, clearGameByIdR, updateGameR } = gamesSlice.actions\nexport default gamesSlice.reducer"]},"metadata":{},"sourceType":"module"}