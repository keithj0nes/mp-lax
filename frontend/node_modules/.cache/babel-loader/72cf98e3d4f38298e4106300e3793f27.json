{"ast":null,"code":"var _jsxFileName = \"/Users/keithjones/Documents/development/projects/mp-lax/frontend/src/components/Table.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport classnames from \"classnames\";\nimport { ArrowDownIcon } from '@heroicons/react/solid';\nimport ReactTooltip from \"react-tooltip\";\nimport { Title } from \"./\"; // TODO: possibly use this package for hover header issues \n// yarn add @react-aria/interactions\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Table = _ref => {\n  _s();\n\n  var _headers$find;\n\n  let {\n    headers,\n    columns,\n    body,\n    uniqueKey,\n    title\n  } = _ref;\n  const [sortBy, setSortBy] = useState(((_headers$find = headers.find(h => h.default)) === null || _headers$find === void 0 ? void 0 : _headers$find.sort) || null);\n  const [sortDir, setSortDir] = useState('asc'); // useEffect(() => {\n  //     // set ordering if query params exist\n  //     const queryParams = {...router.query};\n  //     // delete queryParams.tab\n  //     if (Object.keys(queryParams).length !== 0) {\n  //         setSortBy(queryParams.orderby);\n  //         setSortDir(queryParams.dir);\n  //     }\n  // }, [])\n\n  const applySort = sortField => {\n    let direction = sortDir === 'asc' ? 'desc' : 'asc';\n\n    if (sortField !== sortBy) {\n      direction = 'asc';\n    }\n\n    console.log(sortField, 'sortField');\n    setSortBy(sortField);\n    setSortDir(direction); // router.push({ query: { ...router.query, orderby: sortField, dir: direction }});\n  };\n\n  if (!body.length) return 'loading...'; // {/* <a data-tip data-for='sadFace'> இдஇ </a> */}\n  // {/* <ReactTooltip id='sadFace' type='warning' effect='solid'>\n  //   <span>Show sad face</span>\n  // </ReactTooltip> */}\n\n  const TableSort = _ref2 => {\n    let {\n      label,\n      sort,\n      className,\n      alt\n    } = _ref2;\n    const isSortable = sort !== undefined;\n    const active = sort === sortBy;\n    return /*#__PURE__*/_jsxDEV(\"th\", {\n      className: `p-2 ${className}`,\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        \"data-tip\": true,\n        \"data-for\": label,\n        onClick: () => !!sort && applySort(sort),\n        className: classnames(`font-semibold text-left relative block`, {\n          'hover:underline cursor-pointer': !!sort\n        }),\n        children: [label, /*#__PURE__*/_jsxDEV(ArrowDownIcon, {\n          className: classnames(`inline h-3 mx-1 absolute top-px text-indigo-500`, {\n            'invisible': !isSortable || !active,\n            'rotate-180': sortDir === 'desc'\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), alt && /*#__PURE__*/_jsxDEV(ReactTooltip, {\n        id: label,\n        type: \"dark\",\n        effect: \"solid\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-normal text-xs\",\n          children: alt\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this);\n  };\n\n  body.sort((a, b) => {\n    // console.log(sortBy, 'sortBysortBysortBysortBy')\n    console.log(a, b, 'A B');\n    console.log(a[sortBy], b[sortBy], 'a[sortBy] b[sortBy]');\n    console.log(typeof a[sortBy], typeof b[sortBy], 'type offfff');\n    console.log(a[sortBy].localeCompare(b[sortBy]), 'a[sortBy].localeCompare(b[sortBy])'); // return \n\n    if (!sortBy) return null;\n\n    if (typeof a[sortBy] === 'number' && typeof b[sortBy] === 'number' || typeof a[sortBy] === 'boolean' && typeof b[sortBy] === 'boolean') {\n      if (sortDir === 'asc') {\n        return a[sortBy] - b[sortBy];\n      }\n\n      return b[sortBy] - a[sortBy];\n    }\n\n    if (sortDir === 'asc') {\n      return a[sortBy].localeCompare(b[sortBy]);\n    }\n\n    return b[sortBy].localeCompare(a[sortBy]);\n  }); // TODO: really need to streamline this function\n\n  const switchType = (type, value, keyValue, item, ind) => {\n    // console.log({type, value, keyValue, item, ind})\n    switch (type) {\n      case 'number':\n      case 'string':\n      case 'date':\n        return keyValue || value;\n\n      case 'index':\n        return ind + 1;\n      // case 'math/currency':\n      //     const formatted = variableStringFormatter(value.format, item).replace(/\\s/g, '');\n      //     const splitOnOperators = formatted.match(/[^\\d()]+|[\\d.]+/g);\n      //     const [num1, op, num2] = splitOnOperators;\n      //     let answer\n      //     switch (op) {\n      //         case '*':\n      //             answer = num1 * num2;\n      //             break;\n      //         case '/':\n      //             answer = num1 / num2;\n      //             break;\n      //         case '+':\n      //             answer = num1 + num2;\n      //             break;\n      //         case '-':\n      //             answer = num1 - num2;\n      //             break;\n      //         default:\n      //             break;\n      //     }\n      // console.log(currency(answer))\n      //     return currency(answer)\n      // case 'currency':\n      //     return currency(value);\n\n      case 'boolean':\n        if (value.hasOwnProperty('trueValue') && value.hasOwnProperty('falseValue')) {\n          return keyValue ? value.trueValue : value.falseValue;\n        } // console.log(type, value, keyValue, 'type value BOOLEAN!!!!')\n        // if (!keyValue) console.warn('Please make sure column is an object with a format key [SortableTable.js boolean]')\n\n\n        return !!keyValue ? value.format : null;\n\n      case 'link':\n        // console.log(type, value, keyValue, item, 'type value LINK!!')\n        const href = variableStringFormatter(value.format, item); // console.log(href, 'rhehfhf')\n\n        const as = variableStringFormatter(value.as, item);\n        return /*#__PURE__*/_jsxDEV(Link, {\n          to: href,\n          className: \"hover:text-mpred\",\n          children: as\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }, this);\n\n      default:\n        return value;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col-span-full xl:col-span-6 bg-white\",\n    children: [title && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Title, {\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }, this)\n    }, void 0, false), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-0\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table-auto w-full\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"text-xs uppercase text-gray-400 bg-gray-50 rounded-sm border-b border-gray-200\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: headers.map(item => {\n                return /*#__PURE__*/_jsxDEV(TableSort, {\n                  label: item.label,\n                  alt: item.alt,\n                  sort: item.sort,\n                  className: item.className\n                }, item.label, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 41\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"text-sm font-medium divide-y divide-gray-200\",\n            children: body.map((item, ind) => {\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"hover:bg-gray-50\",\n                children: Object.entries(columns).map(_ref3 => {\n                  let [colKey, colValue] = _ref3;\n                  // console.log(colKey, colValue, 'COL')\n                  let formattedRow;\n\n                  if (typeof colValue === 'object') {\n                    formattedRow = switchType(colValue.type, colValue, item[colKey], item, ind);\n                    return /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: `p-2 ${colValue.className || ''}`,\n                      children: formattedRow\n                    }, colKey, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 217,\n                      columnNumber: 53\n                    }, this);\n                  }\n\n                  formattedRow = switchType(colValue, item[colKey], null, null, ind); // console.log(stuff, 'STUFF!!!')\n\n                  return /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"p-2\",\n                    children: formattedRow\n                  }, colKey, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 49\n                  }, this);\n                })\n              }, uniqueKey ? item[uniqueKey] : item.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 37\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Table, \"GTCWLqJcDvgAoXT2OYTET2X4CxE=\");\n\n_c = Table;\nexport default Table; // this function takes the format string, replaces the $variable_name with the variable passed into the data prop and returns the original string with replaced variables\n// format: '/dashboard/orders/$id'\n\nfunction variableStringFormatter(str, data) {\n  // return str.split(/(?=[\\s.,:;-])|(?<=[\\s.,:;-])/g).map(item => {\n  return str.split(/([\\s()/.,:;-])/g).map(item => {\n    if (item.charAt(0) === '$') {\n      return Object.keys(data).map(i => {\n        if (i === item.slice(1)) {\n          return data[i] || '0';\n        }\n\n        return null;\n      }).filter(Boolean);\n    }\n\n    return item;\n  }).join('');\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"Table\");","map":{"version":3,"sources":["/Users/keithjones/Documents/development/projects/mp-lax/frontend/src/components/Table.js"],"names":["useState","Link","classnames","ArrowDownIcon","ReactTooltip","Title","Table","headers","columns","body","uniqueKey","title","sortBy","setSortBy","find","h","default","sort","sortDir","setSortDir","applySort","sortField","direction","console","log","length","TableSort","label","className","alt","isSortable","undefined","active","a","b","localeCompare","switchType","type","value","keyValue","item","ind","hasOwnProperty","trueValue","falseValue","format","href","variableStringFormatter","as","map","Object","entries","colKey","colValue","formattedRow","id","str","data","split","charAt","keys","i","slice","filter","Boolean","join"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport classnames from \"classnames\";\nimport { ArrowDownIcon } from '@heroicons/react/solid';\nimport ReactTooltip from \"react-tooltip\";\nimport { Title } from \"./\";\n\n// TODO: possibly use this package for hover header issues \n// yarn add @react-aria/interactions\n\nconst Table = ({ headers, columns, body, uniqueKey, title }) => {\n\n    const [sortBy, setSortBy] = useState(headers.find(h => h.default)?.sort || null);\n    const [sortDir, setSortDir] = useState('asc');\n\n    // useEffect(() => {\n    //     // set ordering if query params exist\n    //     const queryParams = {...router.query};\n    //     // delete queryParams.tab\n\n    //     if (Object.keys(queryParams).length !== 0) {\n    //         setSortBy(queryParams.orderby);\n    //         setSortDir(queryParams.dir);\n    //     }\n    // }, [])\n\n    const applySort = (sortField) => {\n        let direction = sortDir === 'asc' ? 'desc' : 'asc'\n        if (sortField !== sortBy) {\n            direction = 'asc'\n        }\n        console.log(sortField, 'sortField')\n        setSortBy(sortField);\n        setSortDir(direction);\n\n        // router.push({ query: { ...router.query, orderby: sortField, dir: direction }});\n    }\n\n    if (!body.length) return 'loading...'\n\n\n// {/* <a data-tip data-for='sadFace'> இдஇ </a> */}\n// {/* <ReactTooltip id='sadFace' type='warning' effect='solid'>\n//   <span>Show sad face</span>\n// </ReactTooltip> */}\n\n    const TableSort = ({ label, sort, className, alt }) => {\n        const isSortable = sort !== undefined;\n        const active = sort === sortBy;\n        return (\n            <th className={`p-2 ${className}`}>\n                <span\n                    data-tip\n                    data-for={label}\n                    onClick={() => !!sort && applySort(sort)}\n                    className={classnames(\n                        `font-semibold text-left relative block`,\n                        {\n                            'hover:underline cursor-pointer': !!sort,\n                        }\n                    )} \n                >\n                    {label}\n\n                    <ArrowDownIcon className={classnames(\n                        `inline h-3 mx-1 absolute top-px text-indigo-500`,\n                        {\n                            'invisible': !isSortable || !active,\n                            'rotate-180': sortDir === 'desc',\n                        }\n                        )} \n                    />\n                </span>\n                {alt && (\n                    <ReactTooltip id={label} type='dark' effect='solid'>\n                        <span className=\"font-normal text-xs\">{alt}</span>\n                    </ReactTooltip>\n                )}\n            </th>\n        )\n    }\n\n    body.sort((a, b) => {\n        // console.log(sortBy, 'sortBysortBysortBysortBy')\n        console.log(a, b, 'A B')\n        console.log(a[sortBy], b[sortBy], 'a[sortBy] b[sortBy]')\n        console.log(typeof a[sortBy], typeof b[sortBy], 'type offfff')\n\n        console.log(a[sortBy].localeCompare(b[sortBy]), 'a[sortBy].localeCompare(b[sortBy])')\n        // return \n        if (!sortBy) return null;\n        if (\n            (typeof a[sortBy] === 'number' && typeof b[sortBy] === 'number') ||\n            (typeof a[sortBy] === 'boolean' && typeof b[sortBy] === 'boolean')\n        ) {\n            if (sortDir === 'asc') {\n                return a[sortBy] - b[sortBy]\n            }\n            return b[sortBy] - a[sortBy]\n        }\n\n        if (sortDir === 'asc') {\n            return a[sortBy].localeCompare(b[sortBy])\n        }\n        return b[sortBy].localeCompare(a[sortBy])\n    })\n\n    // TODO: really need to streamline this function\n    const switchType = (type, value, keyValue, item, ind) => {\n        // console.log({type, value, keyValue, item, ind})\n        \n        switch (type) {\n            case 'number':\n            case 'string':\n            case 'date':\n                return keyValue || value;\n            case 'index':\n                return ind + 1;\n            // case 'math/currency':\n            //     const formatted = variableStringFormatter(value.format, item).replace(/\\s/g, '');\n            //     const splitOnOperators = formatted.match(/[^\\d()]+|[\\d.]+/g);\n            //     const [num1, op, num2] = splitOnOperators;\n            //     let answer\n            //     switch (op) {\n            //         case '*':\n            //             answer = num1 * num2;\n            //             break;\n            //         case '/':\n            //             answer = num1 / num2;\n            //             break;\n            //         case '+':\n            //             answer = num1 + num2;\n            //             break;\n            //         case '-':\n            //             answer = num1 - num2;\n            //             break;\n            //         default:\n            //             break;\n            //     }\n\n                // console.log(currency(answer))\n            //     return currency(answer)\n            // case 'currency':\n            //     return currency(value);\n            case 'boolean':\n                if (value.hasOwnProperty('trueValue') && value.hasOwnProperty('falseValue')) {\n                    return keyValue ? value.trueValue : value.falseValue;\n                }\n            // console.log(type, value, keyValue, 'type value BOOLEAN!!!!')\n                // if (!keyValue) console.warn('Please make sure column is an object with a format key [SortableTable.js boolean]')\n                return !!keyValue ? value.format : null;\n            case 'link':\n                // console.log(type, value, keyValue, item, 'type value LINK!!')\n                const href = variableStringFormatter(value.format, item)\n\n                // console.log(href, 'rhehfhf')\n                const as = variableStringFormatter(value.as, item)\n\n                return (\n                    <Link to={href} className=\"hover:text-mpred\">\n                        {/* <a className=\"text-xs hover:text-gray-800 transition duration-200 underline\" href=\"\"> */}\n                            {as}\n                            {/* </a> */}\n                    </Link>\n                );\n            default:\n                return value;    \n                \n        }\n    }\n\n    return (\n        <div className=\"col-span-full xl:col-span-6 bg-white\">\n            {title && (\n                <>\n                    {/* <div className=\"px-5 py-4 border-b border-gray-200 bg-emerald-200\">\n                        <h2 className=\"font-semibold text-gray-800\">{title} - (custom table)</h2>\n                    </div> */}\n\n                    {/* <div className=\"inline-block md:pr-20 border-b border-black mb-4\">\n                        <h3 className=\"text-lg font-bold\">{title}</h3>\n                    </div> */}\n                    <div>\n\n\n                        <Title>{title}</Title>\n                    </div>\n                </>\n            )}\n        {/* <h2>Sortable Table component</h2> */}\n\n            {/* <div className=\"p-3\"> */}\n            <div className=\"p-0\">\n                <div className=\"overflow-x-auto\">\n                    <table className=\"table-auto w-full\">\n                        <thead className=\"text-xs uppercase text-gray-400 bg-gray-50 rounded-sm border-b border-gray-200\">\n                            <tr>\n                                {headers.map(item => {\n                                    return (\n                                        <TableSort label={item.label} alt={item.alt} sort={item.sort} className={item.className} key={item.label} />\n                                    )\n                                })}\n                            </tr>\n                        </thead>\n\n                        <tbody className=\"text-sm font-medium divide-y divide-gray-200\">\n\n                            {body.map((item, ind) => {\n                                return (\n                                    <tr key={uniqueKey ? item[uniqueKey] :item.id} className=\"hover:bg-gray-50\">\n                                        {Object.entries(columns).map(([colKey, colValue]) => {\n                                            // console.log(colKey, colValue, 'COL')\n                                            let formattedRow;\n                                            if (typeof colValue === 'object') {\n                                                formattedRow = switchType(colValue.type, colValue, item[colKey], item, ind)\n                                                return (\n                                                    <td className={`p-2 ${colValue.className || ''}`} key={colKey}>{formattedRow}</td>\n                                                )\n                                            } \n\n                                            formattedRow = switchType(colValue, item[colKey], null, null, ind);\n                                            // console.log(stuff, 'STUFF!!!')\n                                            return (\n                                                <td className=\"p-2\" key={colKey}>{formattedRow}</td>\n                                            )\n                                        })}\n                                    </tr>\n                                )\n                            })}\n                        </tbody>                        \n                    </table>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Table;\n\n// this function takes the format string, replaces the $variable_name with the variable passed into the data prop and returns the original string with replaced variables\n// format: '/dashboard/orders/$id'\n\nfunction variableStringFormatter(str, data) {\n    // return str.split(/(?=[\\s.,:;-])|(?<=[\\s.,:;-])/g).map(item => {\n    return str.split(/([\\s()/.,:;-])/g).map(item => {\n        if (item.charAt(0) === '$') {\n            return Object.keys(data).map(i => {\n                if (i === item.slice(1)) {\n                    return data[i] || '0';\n                }\n                return null;\n            }).filter(Boolean);\n        }\n        return item;\n    }).join('');\n}\n\n"]},"metadata":{},"sourceType":"module"}