{"ast":null,"code":"var _jsxFileName = \"/Users/keithjones/Documents/development/projects/mp-lax/frontend/src/components/Table.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport classnames from \"classnames\";\nimport { ArrowDownIcon } from '@heroicons/react/solid';\nimport ReactTooltip from \"react-tooltip\";\nimport { Title } from \"./\"; // TODO: possibly use this package for hover header issues \n// yarn add @react-aria/interactions\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Table = _ref => {\n  _s();\n\n  var _headers$find;\n\n  let {\n    headers,\n    columns,\n    body,\n    uniqueKey,\n    title,\n    disableSort\n  } = _ref;\n  const [sortBy, setSortBy] = useState(((_headers$find = headers.find(h => h.default)) === null || _headers$find === void 0 ? void 0 : _headers$find.sort) || null);\n  const [sortDir, setSortDir] = useState('asc'); // useEffect(() => {\n  //     // set ordering if query params exist\n  //     const queryParams = {...router.query};\n  //     // delete queryParams.tab\n  //     if (Object.keys(queryParams).length !== 0) {\n  //         setSortBy(queryParams.orderby);\n  //         setSortDir(queryParams.dir);\n  //     }\n  // }, [])\n\n  const applySort = sortField => {\n    let direction = sortDir === 'asc' ? 'desc' : 'asc';\n\n    if (sortField !== sortBy) {\n      direction = 'asc';\n    } // console.log(sortField, 'sortField')\n\n\n    setSortBy(sortField);\n    setSortDir(direction); // router.push({ query: { ...router.query, orderby: sortField, dir: direction }});\n  };\n\n  if (!body.length) return 'loading...'; // {/* <a data-tip data-for='sadFace'> இдஇ </a> */}\n  // {/* <ReactTooltip id='sadFace' type='warning' effect='solid'>\n  //   <span>Show sad face</span>\n  // </ReactTooltip> */}\n\n  const TableSort = _ref2 => {\n    let {\n      label,\n      sort,\n      className,\n      alt\n    } = _ref2;\n    const isSortable = sort !== undefined && !disableSort;\n    const active = sort === sortBy;\n    return /*#__PURE__*/_jsxDEV(\"th\", {\n      className: `p-2 ${className}`,\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        \"data-tip\": true,\n        \"data-for\": label,\n        onClick: () => !!sort && !disableSort && applySort(sort),\n        className: classnames(`font-semibold text-left relative block`, {\n          'hover:underline cursor-pointer': !!sort && !disableSort\n        }),\n        children: [label, /*#__PURE__*/_jsxDEV(ArrowDownIcon, {\n          className: classnames(`inline h-3 mx-1 absolute top-px text-indigo-500`, {\n            'invisible': !isSortable || !active,\n            'rotate-180': sortDir === 'desc'\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), alt && /*#__PURE__*/_jsxDEV(ReactTooltip, {\n        id: label,\n        type: \"dark\",\n        effect: \"solid\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-normal text-xs\",\n          children: alt\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this);\n  };\n\n  const bodyCopy = [...body].sort((a, b) => {\n    // console.log(sortBy, 'sortBysortBysortBysortBy')\n    // console.log(a, b, 'A B')\n    // console.log(a[sortBy], b[sortBy], 'a[sortBy] b[sortBy]')\n    // console.log(typeof a[sortBy], typeof b[sortBy], 'type offfff')\n    // return \n    if (!sortBy) return null;\n\n    if (typeof a[sortBy] === 'number' && typeof b[sortBy] === 'number' || typeof a[sortBy] === 'boolean' && typeof b[sortBy] === 'boolean') {\n      if (sortDir === 'asc') {\n        return a[sortBy] - b[sortBy];\n      }\n\n      return b[sortBy] - a[sortBy];\n    }\n\n    if (sortDir === 'asc') {\n      return a[sortBy].localeCompare(b[sortBy]);\n    }\n\n    return b[sortBy].localeCompare(a[sortBy]);\n  }); // TODO: really need to streamline this function\n\n  const switchType = (type, value, keyValue, item, ind) => {\n    console.log({\n      type,\n      value,\n      keyValue,\n      item,\n      ind\n    }); // console.log(keyValue, value, 'hahaha')\n\n    switch (type) {\n      // case 'date-fn':\n      case 'number':\n      case 'string':\n      case 'date':\n        return keyValue || value;\n\n      case 'index':\n        return ind + 1;\n\n      case 'math':\n        const formatted = variableStringFormatter(value.format, item).replace(/\\s/g, '');\n        const splitOnOperators = formatted.match(/[^\\d()]+|[\\d.]+/g);\n        const [num1, op, num2] = splitOnOperators; // console.log(num1, op, num2, 'num1, op, num2')\n\n        let answer;\n\n        switch (op) {\n          case '*':\n            answer = num1 * num2;\n            break;\n\n          case '/':\n            answer = num1 / num2;\n            break;\n\n          case '+':\n            answer = parseInt(num1) + parseInt(num2);\n            break;\n\n          case '-':\n            answer = num1 - num2;\n            break;\n\n          default:\n            break;\n        } // console.log(currency(answer))\n\n\n        return answer;\n      // case 'currency':\n      //     return currency(value);\n\n      case 'boolean':\n        if (value.hasOwnProperty('trueValue') && value.hasOwnProperty('falseValue')) {\n          return keyValue ? value.trueValue : value.falseValue;\n        } // console.log(type, value, keyValue, 'type value BOOLEAN!!!!')\n        // if (!keyValue) console.warn('Please make sure column is an object with a format key [SortableTable.js boolean]')\n\n\n        return !!keyValue ? value.format : null;\n\n      case 'link':\n        // console.log(type, value, keyValue, item, 'type value LINK!!')\n        const href = variableStringFormatter(value.format, item); // console.log(href, 'rhehfhf')\n\n        const as = variableStringFormatter(value.as, item);\n        return /*#__PURE__*/_jsxDEV(Link, {\n          to: href,\n          className: \"hover:text-mpred\",\n          children: as\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }, this);\n\n      case 'button':\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => value.func(item),\n          children: value.as\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 28\n        }, this);\n\n      default:\n        return value;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col-span-full xl:col-span-6 bg-white\",\n    children: [title && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Title, {\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 21\n      }, this)\n    }, void 0, false), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-0\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table-auto w-full\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"text-xs uppercase text-gray-400 bg-gray-50 rounded-sm border-b border-gray-200\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: headers.map(item => {\n                return /*#__PURE__*/_jsxDEV(TableSort, {\n                  label: item.label,\n                  alt: item.alt,\n                  sort: item.sort,\n                  className: item.className\n                }, item.label, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 41\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"text-sm font-medium divide-y divide-gray-200\",\n            children: bodyCopy.map((item, ind) => {\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"hover:bg-gray-50\",\n                children: Object.entries(columns).map(_ref3 => {\n                  let [colKey, colValue] = _ref3;\n                  // console.log(colKey, colValue, 'COL')\n                  let formattedRow;\n\n                  if (typeof colValue === 'object') {\n                    formattedRow = switchType(colValue.type, colValue, item[colKey], item, ind);\n                    return /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: `p-2 ${colValue.className || ''}`,\n                      children: formattedRow\n                    }, colKey, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 220,\n                      columnNumber: 53\n                    }, this);\n                  }\n\n                  formattedRow = switchType(colValue, item[colKey], null, null, ind); // console.log(stuff, 'STUFF!!!')\n\n                  return /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"p-2\",\n                    children: formattedRow\n                  }, colKey, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 49\n                  }, this);\n                })\n              }, uniqueKey ? item[uniqueKey] : item.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 37\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 176,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Table, \"GTCWLqJcDvgAoXT2OYTET2X4CxE=\");\n\n_c = Table;\nexport default Table; // this function takes the format string, replaces the $variable_name with the variable passed into the data prop and returns the original string with replaced variables\n// format: '/dashboard/orders/$id'\n\nfunction variableStringFormatter(str, data) {\n  // return str.split(/(?=[\\s.,:;-])|(?<=[\\s.,:;-])/g).map(item => {\n  return str.split(/([\\s()/.,:;-])/g).map(item => {\n    if (item.charAt(0) === '$') {\n      return Object.keys(data).map(i => {\n        if (i === item.slice(1)) {\n          return data[i] || '0';\n        }\n\n        return null;\n      }).filter(Boolean);\n    }\n\n    return item;\n  }).join('');\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"Table\");","map":{"version":3,"sources":["/Users/keithjones/Documents/development/projects/mp-lax/frontend/src/components/Table.js"],"names":["useState","Link","classnames","ArrowDownIcon","ReactTooltip","Title","Table","headers","columns","body","uniqueKey","title","disableSort","sortBy","setSortBy","find","h","default","sort","sortDir","setSortDir","applySort","sortField","direction","length","TableSort","label","className","alt","isSortable","undefined","active","bodyCopy","a","b","localeCompare","switchType","type","value","keyValue","item","ind","console","log","formatted","variableStringFormatter","format","replace","splitOnOperators","match","num1","op","num2","answer","parseInt","hasOwnProperty","trueValue","falseValue","href","as","func","map","Object","entries","colKey","colValue","formattedRow","id","str","data","split","charAt","keys","i","slice","filter","Boolean","join"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport classnames from \"classnames\";\nimport { ArrowDownIcon } from '@heroicons/react/solid';\nimport ReactTooltip from \"react-tooltip\";\nimport { Title } from \"./\";\n\n// TODO: possibly use this package for hover header issues \n// yarn add @react-aria/interactions\n\nconst Table = ({ headers, columns, body, uniqueKey, title, disableSort }) => {\n\n    const [sortBy, setSortBy] = useState(headers.find(h => h.default)?.sort || null);\n    const [sortDir, setSortDir] = useState('asc');\n\n    // useEffect(() => {\n    //     // set ordering if query params exist\n    //     const queryParams = {...router.query};\n    //     // delete queryParams.tab\n\n    //     if (Object.keys(queryParams).length !== 0) {\n    //         setSortBy(queryParams.orderby);\n    //         setSortDir(queryParams.dir);\n    //     }\n    // }, [])\n\n    const applySort = (sortField) => {\n        let direction = sortDir === 'asc' ? 'desc' : 'asc'\n        if (sortField !== sortBy) {\n            direction = 'asc'\n        }\n        // console.log(sortField, 'sortField')\n        setSortBy(sortField);\n        setSortDir(direction);\n\n        // router.push({ query: { ...router.query, orderby: sortField, dir: direction }});\n    }\n\n    if (!body.length) return 'loading...'\n\n\n// {/* <a data-tip data-for='sadFace'> இдஇ </a> */}\n// {/* <ReactTooltip id='sadFace' type='warning' effect='solid'>\n//   <span>Show sad face</span>\n// </ReactTooltip> */}\n\n    const TableSort = ({ label, sort, className, alt }) => {\n        const isSortable = sort !== undefined && !disableSort;\n        const active = sort === sortBy;\n        return (\n            <th className={`p-2 ${className}`}>\n                <span\n                    data-tip\n                    data-for={label}\n                    onClick={() => !!sort && !disableSort && applySort(sort)}\n                    className={classnames(\n                        `font-semibold text-left relative block`,\n                        {\n                            'hover:underline cursor-pointer': !!sort && !disableSort,\n                        }\n                    )} \n                >\n                    {label}\n\n                    <ArrowDownIcon className={classnames(\n                        `inline h-3 mx-1 absolute top-px text-indigo-500`,\n                        {\n                            'invisible': !isSortable || !active,\n                            'rotate-180': sortDir === 'desc',\n                        }\n                        )} \n                    />\n                </span>\n                {alt && (\n                    <ReactTooltip id={label} type='dark' effect='solid'>\n                        <span className=\"font-normal text-xs\">{alt}</span>\n                    </ReactTooltip>\n                )}\n            </th>\n        )\n    }\n\n    const bodyCopy = [...body].sort((a, b) => {\n        // console.log(sortBy, 'sortBysortBysortBysortBy')\n        // console.log(a, b, 'A B')\n        // console.log(a[sortBy], b[sortBy], 'a[sortBy] b[sortBy]')\n        // console.log(typeof a[sortBy], typeof b[sortBy], 'type offfff')\n\n        // return \n        if (!sortBy) return null;\n        if (\n            (typeof a[sortBy] === 'number' && typeof b[sortBy] === 'number') ||\n            (typeof a[sortBy] === 'boolean' && typeof b[sortBy] === 'boolean')\n        ) {\n            if (sortDir === 'asc') {\n                return a[sortBy] - b[sortBy]\n            }\n            return b[sortBy] - a[sortBy]\n        }\n\n\n        if (sortDir === 'asc') {\n            return a[sortBy].localeCompare(b[sortBy])\n        }\n        return b[sortBy].localeCompare(a[sortBy])\n    });\n\n    // TODO: really need to streamline this function\n    const switchType = (type, value, keyValue, item, ind) => {\n        console.log({type, value, keyValue, item, ind})\n        // console.log(keyValue, value, 'hahaha')\n        switch (type) {\n            // case 'date-fn':\n            case 'number':\n            case 'string':\n            case 'date':\n                return keyValue || value;\n            case 'index':\n                return ind + 1;\n            case 'math':\n                const formatted = variableStringFormatter(value.format, item).replace(/\\s/g, '');\n                const splitOnOperators = formatted.match(/[^\\d()]+|[\\d.]+/g);\n                const [num1, op, num2] = splitOnOperators;\n                // console.log(num1, op, num2, 'num1, op, num2')\n                let answer\n                switch (op) {\n                    case '*':\n                        answer = num1 * num2;\n                        break;\n                    case '/':\n                        answer = num1 / num2;\n                        break;\n                    case '+':\n                        answer = parseInt(num1) + parseInt(num2);\n                        break;\n                    case '-':\n                        answer = num1 - num2;\n                        break;\n                    default:\n                        break;\n                }\n\n                // console.log(currency(answer))\n                return answer;\n            // case 'currency':\n            //     return currency(value);\n            case 'boolean':\n                if (value.hasOwnProperty('trueValue') && value.hasOwnProperty('falseValue')) {\n                    return keyValue ? value.trueValue : value.falseValue;\n                }\n            // console.log(type, value, keyValue, 'type value BOOLEAN!!!!')\n                // if (!keyValue) console.warn('Please make sure column is an object with a format key [SortableTable.js boolean]')\n                return !!keyValue ? value.format : null;\n            case 'link':\n                // console.log(type, value, keyValue, item, 'type value LINK!!')\n                const href = variableStringFormatter(value.format, item)\n\n                // console.log(href, 'rhehfhf')\n                const as = variableStringFormatter(value.as, item)\n\n                return (\n                    <Link to={href} className=\"hover:text-mpred\">\n                        {/* <a className=\"text-xs hover:text-gray-800 transition duration-200 underline\" href=\"\"> */}\n                            {as}\n                            {/* </a> */}\n                    </Link>\n                );\n            case 'button':\n                    return <button onClick={() => value.func(item)}>{value.as}</button>\n            default:\n                return value;\n        }\n    }\n\n    return (\n        <div className=\"col-span-full xl:col-span-6 bg-white\">\n            {title && (\n                <>\n                    {/* <div className=\"px-5 py-4 border-b border-gray-200 bg-emerald-200\">\n                        <h2 className=\"font-semibold text-gray-800\">{title} - (custom table)</h2>\n                    </div> */}\n\n                    {/* <div className=\"inline-block md:pr-20 border-b border-black mb-4\">\n                        <h3 className=\"text-lg font-bold\">{title}</h3>\n                    </div> */}\n                    <div>\n\n\n                        <Title>{title}</Title>\n                    </div>\n                </>\n            )}\n        {/* <h2>Sortable Table component</h2> */}\n\n            {/* <div className=\"p-3\"> */}\n            <div className=\"p-0\">\n                <div className=\"overflow-x-auto\">\n                    <table className=\"table-auto w-full\">\n                        <thead className=\"text-xs uppercase text-gray-400 bg-gray-50 rounded-sm border-b border-gray-200\">\n                            <tr>\n                                {headers.map(item => {\n                                    return (\n                                        <TableSort label={item.label} alt={item.alt} sort={item.sort} className={item.className} key={item.label} />\n                                    )\n                                })}\n                            </tr>\n                        </thead>\n\n                        <tbody className=\"text-sm font-medium divide-y divide-gray-200\">\n\n                            {bodyCopy.map((item, ind) => {\n                                return (\n                                    <tr key={uniqueKey ? item[uniqueKey] :item.id} className=\"hover:bg-gray-50\">\n                                        {Object.entries(columns).map(([colKey, colValue]) => {\n                                            // console.log(colKey, colValue, 'COL')\n                                            let formattedRow;\n                                            if (typeof colValue === 'object') {\n                                                formattedRow = switchType(colValue.type, colValue, item[colKey], item, ind)\n                                                return (\n                                                    <td className={`p-2 ${colValue.className || ''}`} key={colKey}>{formattedRow}</td>\n                                                )\n                                            } \n\n                                            formattedRow = switchType(colValue, item[colKey], null, null, ind);\n                                            // console.log(stuff, 'STUFF!!!')\n                                            return (\n                                                <td className=\"p-2\" key={colKey}>{formattedRow}</td>\n                                            )\n                                        })}\n                                    </tr>\n                                )\n                            })}\n                        </tbody>                        \n                    </table>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Table;\n\n// this function takes the format string, replaces the $variable_name with the variable passed into the data prop and returns the original string with replaced variables\n// format: '/dashboard/orders/$id'\n\nfunction variableStringFormatter(str, data) {\n    // return str.split(/(?=[\\s.,:;-])|(?<=[\\s.,:;-])/g).map(item => {\n    return str.split(/([\\s()/.,:;-])/g).map(item => {\n        if (item.charAt(0) === '$') {\n            return Object.keys(data).map(i => {\n                if (i === item.slice(1)) {\n                    return data[i] || '0';\n                }\n                return null;\n            }).filter(Boolean);\n        }\n        return item;\n    }).join('');\n}\n\n"]},"metadata":{},"sourceType":"module"}