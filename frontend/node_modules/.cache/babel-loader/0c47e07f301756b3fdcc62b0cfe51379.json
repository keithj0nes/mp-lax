{"ast":null,"code":"var _s = $RefreshSig$();\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport { useEffect, useState } from 'react';\nexport default function useForm() {\n  _s();\n\n  let initialState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const [fields, setFields] = useState(initialState);\n  const [errors, setErrors] = useState({});\n  const initalValues = Object.values(initialState).join('');\n  useEffect(() => {\n    setFields(initialState);\n  }, [initalValues]);\n\n  const handleChange = (e, key) => {\n    // console.log(key, 'keeeyy')\n    let {\n      value,\n      name,\n      type,\n      files,\n      checked\n    } = e.target; // console.log(type, name, checked, value, 'TYPEEEE')\n\n    if (type === 'number') {\n      value = parseInt(value);\n    }\n\n    if (type === 'file') {\n      [value] = files;\n    }\n\n    if (key) {\n      return setFields({ ...fields,\n        [key]: { ...fields[key],\n          [name]: {\n            value: type === 'checkbox' ? checked : value\n          }\n        }\n      });\n    }\n\n    setFields({ ...fields,\n      [name]: type === 'checkbox' ? checked : value\n    });\n  };\n\n  const validate = validations => {\n    let valid = true;\n    const newErrors = {};\n\n    for (const key in validations) {\n      var _validation$required;\n\n      // value of the field we're validating\n      const value = fields[key]; // the matching validation rule for this key\n\n      const validation = validations[key]; // REQUIRED\n\n      if ((validation === null || validation === void 0 ? void 0 : (_validation$required = validation.required) === null || _validation$required === void 0 ? void 0 : _validation$required.value) !== false && !value) {\n        var _validation$required2;\n\n        valid = false;\n        newErrors[key] = validation === null || validation === void 0 ? void 0 : (_validation$required2 = validation.required) === null || _validation$required2 === void 0 ? void 0 : _validation$required2.message;\n      } // PATTERN\n\n\n      const pattern = validation === null || validation === void 0 ? void 0 : validation.pattern;\n      console.log(RegExp(pattern.value).test(value), 'RegExp(pattern.value).test(value)');\n\n      if (pattern !== null && pattern !== void 0 && pattern.value && !RegExp(pattern.value).test(value)) {\n        valid = false;\n        newErrors[key] = pattern.message;\n      } // CUSTOM\n\n\n      const custom = validation === null || validation === void 0 ? void 0 : validation.custom;\n\n      if (custom !== null && custom !== void 0 && custom.isValid && !custom.isValid(value)) {\n        valid = false;\n        newErrors[key] = custom.message;\n      }\n    }\n\n    console.log(newErrors, 'newErrors');\n\n    if (!valid) {\n      setErrors(newErrors);\n      return false;\n    }\n\n    setErrors(newErrors);\n    return true;\n  };\n\n  const resetForm = () => {\n    setFields(initialState);\n  };\n\n  const clearForm = () => {\n    const clearedState = Object.fromEntries(Object.entries(fields).map(_ref => {\n      let [key, value] = _ref;\n      return [key, ''];\n    }));\n    setFields(clearedState);\n  };\n\n  return {\n    fields,\n    handleChange,\n    resetForm,\n    clearForm,\n    errors,\n    validate\n  };\n}\n\n_s(useForm, \"xfKN+RLE7JZjaIjsJ3NBd7E7rZQ=\");","map":{"version":3,"sources":["/Users/keithjones/Documents/development/projects/mp-lax/src/hooks/useForm.js"],"names":["useEffect","useState","useForm","initialState","fields","setFields","errors","setErrors","initalValues","Object","values","join","handleChange","e","key","value","name","type","files","checked","target","parseInt","validate","validations","valid","newErrors","validation","required","message","pattern","console","log","RegExp","test","custom","isValid","resetForm","clearForm","clearedState","fromEntries","entries","map"],"mappings":"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","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport { useEffect, useState } from 'react';\n\nexport default function useForm(initialState = {}) {\n    const [fields, setFields] = useState(initialState);\n    const [errors, setErrors] = useState({});\n    const initalValues = Object.values(initialState).join('');\n\n    useEffect(() => {\n        setFields(initialState);\n    }, [initalValues]);\n\n    const handleChange = (e, key) => {\n        // console.log(key, 'keeeyy')\n        let { value, name, type, files, checked } = e.target;\n\n        // console.log(type, name, checked, value, 'TYPEEEE')\n\n        if (type === 'number') {\n            value = parseInt(value);\n        }\n        if (type === 'file') {\n            [value] = files;\n        }\n\n        if (key) {\n            return setFields({\n                ...fields,\n                [key]: {\n                    ...fields[key],\n                    [name]: {value: type === 'checkbox' ? checked : value },\n                }\n            });\n        }\n\n        setFields({\n            ...fields,\n            [name]: type === 'checkbox' ? checked : value,\n        });\n    };\n\n    const validate = (validations) => {\n        let valid = true;\n        const newErrors = {};\n        for (const key in validations) {\n            // value of the field we're validating\n            const value = fields[key];\n            // the matching validation rule for this key\n            const validation = validations[key];\n            // REQUIRED\n            if (validation?.required?.value !== false && !value) {\n                valid = false;\n                newErrors[key] = validation?.required?.message;\n            }\n            // PATTERN\n            const pattern = validation?.pattern;\n\n            console.log(RegExp(pattern.value).test(value), 'RegExp(pattern.value).test(value)')\n            if (pattern?.value && !RegExp(pattern.value).test(value)) {\n                valid = false;\n                newErrors[key] = pattern.message;\n            }\n            // CUSTOM\n            const custom = validation?.custom;\n            if (custom?.isValid && !custom.isValid(value)) {\n                valid = false;\n                newErrors[key] = custom.message;\n            }\n        }\n\n        console.log(newErrors, 'newErrors')\n\n        if (!valid) {\n            setErrors(newErrors);\n            return false;\n        }\n        setErrors(newErrors);\n        return true;\n    }\n\n    const resetForm = () => {\n        setFields(initialState);\n    };\n\n    const clearForm = () => {\n        const clearedState = Object.fromEntries(\n            Object.entries(fields).map(([key, value]) => [key, '']),\n        );\n        setFields(clearedState);\n    };\n\n    return { fields, handleChange, resetForm, clearForm, errors, validate };\n}\n"]},"metadata":{},"sourceType":"module"}